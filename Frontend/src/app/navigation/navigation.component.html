<div></div>
<mat-toolbar >
  <mat-toolbar-row style="background: white; height: 60px">
    <button mat-icon-button (click)="sidenav.toggle()">
      <mat-icon>menu</mat-icon>
    </button>
    <span>ERSMS</span>
    <span class="toolbar-item-spacer"></span>
    <!-- <button mat-icon-button [matMenuTriggerFor]="notificationsMenu">
      <mat-icon svgIcon="notification-idle" matBadge="2"></mat-icon>
    </button> -->
    <button mat-icon-button>
      <mat-icon
        [matBadge]="unreadCount"
        matBadgeColor="warn"
        [matMenuTriggerFor]="notificationsMenu"
        >notifications</mat-icon
      >
    </button>

    <button
      *ngIf="this.role === actorsEnum.Student"
      mat-icon-button
      routerLink="/profile"
      class="m-2"><mat-icon svgIcon="user" style="scale: 1.5"></mat-icon></button>
    <button
      *ngIf="this.role !== actorsEnum.Student"
      mat-icon-button
      class="m-2"
      disabled><mat-icon svgIcon="user" style="scale: 1.5"  ></mat-icon></button>
    <div class="username">
      <span
        ><b>{{ name }}</b>
      </span>
      <span>{{ this.role === actorsEnum.OISEP ? "OISEP" : role }}</span>
    </div>

    <button mat-icon-button [matMenuTriggerFor]="settingsMenu">
      <mat-icon>settings</mat-icon>
    </button>
  </mat-toolbar-row>
</mat-toolbar>

<mat-menu #notificationsMenu="matMenu" xPosition="before">
  <div
    style="
      display: flex;
      width: 250px;
      justify-content: space-between;
      align-items: center;
    ">
    <span class="mat-h3 m-3"> <b>Notifications</b> </span>
    <button
      mat-raised-button
      class="mr-2"
      color="primary"
      style="height: 30%"
      (click)="readAllNotifications()">
      Read All
    </button>
  </div>
  <mat-divider></mat-divider>
  <span mat-menu-item *ngIf="notifications.length === 0" class="mt-2"
    >No Notifications yet.</span
  >
  <button
    mat-menu-item style="padding-top: 5px; padding-bottom: 5px"
    *ngFor="let notification of notifications"
    (click)="readNotification(notification)">
    <span>
      <strong>{{ notification.content }}</strong></span
    ><br />
    <!-- <span>{{ notification.read }}</span> -->
  </button>
</mat-menu>

<mat-menu #settingsMenu="matMenu">
  <div
    *ngIf="this.role !== actorsEnum.OISEP && this.role !== actorsEnum.Student"
    mat-menu-item
    style="display: flex; align-items: center; height: 50px"
    (click)="openDialog()">
    <mat-icon>campaign</mat-icon>
    <span>Make Announcement</span>
  </div>
  <div
    mat-menu-item
    style="display: flex; align-items: center; height: 50px"
    (click)="logout()">
    <mat-icon>logout</mat-icon>
    <span>Logout</span>
  </div>
</mat-menu>

<mat-sidenav-container>
  <mat-sidenav style="width: 200px"
    opened="true"
    #sidenav
    mode="side"
    [class.mat-elevation-z4]="true"
    class="app-sidenav">
    <mat-nav-list *ngIf="this.role === actorsEnum.OISEP">
      <mat-list-item
        (click)="populateNotifications()"
        routerLink="/dashboard"
        routerLinkActive="active-list-item">
        <mat-icon svgIcon="dashboard" class="m-2"></mat-icon>
        <span>Dashboard</span>
      </mat-list-item>
    </mat-nav-list>

    <mat-nav-list *ngIf="this.role === actorsEnum.Admin">
      <mat-list-item
        (click)="populateNotifications()"
        routerLink="/dashboard"
        routerLinkActive="active-list-item">
        <mat-icon svgIcon="dashboard" class="m-2"></mat-icon>
        <span>Dashboard</span>
      </mat-list-item>
    </mat-nav-list>

    <mat-nav-list *ngIf="this.role === actorsEnum.Student">
      <mat-list-item
        (click)="populateNotifications()"
        routerLink="/dashboard"
        routerLinkActive="active-list-item">
        <mat-icon svgIcon="dashboard" class="m-2"></mat-icon>
        <span>Dashboard</span>
      </mat-list-item>
      <mat-list-item routerLink="/formsandrequests" (click)="populateNotifications()">
        <mat-icon svgIcon="forms" class="m-2"></mat-icon
        ><span>Forms and Requests</span>
      </mat-list-item>
      <mat-list-item
        (click)="populateNotifications()"
        routerLink="/appointments"
        routerLinkActive="active-list-item">
        <mat-icon svgIcon="calendar" class="m-2"></mat-icon
        ><span>Appointments</span>
      </mat-list-item>
      <mat-list-item (click)="populateNotifications()" routerLink="/messages" routerLinkActive="active-list-item">
        <mat-icon
          svgIcon="messages"
          style="border-color: red"
          class="m-2"></mat-icon
        ><span>Messages</span>
      </mat-list-item>
    </mat-nav-list>


    <mat-nav-list *ngIf="this.role === actorsEnum.DeanDepartmentChair
    || this.role === actorsEnum.CourseCoordinatorInstructor">

    <mat-list-item
        (click)="populateNotifications()"
        routerLink="/dashboard"
        routerLinkActive="active-list-item">
        <mat-icon svgIcon="dashboard" class="m-2"></mat-icon>
        <span>Dashboard</span>
      </mat-list-item>
      <mat-list-item
        (click)="populateNotifications()"
        routerLink="/formsandrequests"
        routerLinkActive="active-list-item">
        <mat-icon svgIcon="forms" class="m-2"></mat-icon
        ><span>Forms and Requests</span>
      </mat-list-item>
      <mat-list-item routerLink="/logging" routerLinkActive="active-list-item">
        <mat-icon svgIcon="logging" class="m-2"></mat-icon><span>Logging</span>
      </mat-list-item>
    </mat-nav-list>

    <mat-nav-list
      *ngIf="
        this.role === actorsEnum.ExchangeCoordinator
      ">
      <mat-list-item
        (click)="populateNotifications()"
        routerLink="/dashboard"
        routerLinkActive="active-list-item">
        <mat-icon svgIcon="dashboard" class="m-2"></mat-icon>
        <span>Dashboard</span>
      </mat-list-item>
      <mat-list-item
        (click)="populateNotifications()"
        routerLink="/formsandrequests"
        routerLinkActive="active-list-item">
        <mat-icon svgIcon="forms" class="m-2"></mat-icon
        ><span>Forms and Requests</span>
      </mat-list-item>
      <mat-list-item
        (click)="populateNotifications()"
        routerLink="/appointments"
        routerLinkActive="active-list-item">
        <mat-icon svgIcon="calendar" class="m-2"></mat-icon
        ><span>Appointments</span>
      </mat-list-item>
      <mat-list-item routerLink="/logging" routerLinkActive="active-list-item">
        <mat-icon svgIcon="logging" class="m-2"></mat-icon><span>Logging</span>
      </mat-list-item>
      <mat-list-item
        (click)="populateNotifications()"
        routerLink="/placements"
        routerLinkActive="active-list-item">
        <mat-icon svgIcon="placements" class="m-2"></mat-icon
        ><span>Placements</span>
      </mat-list-item>
      <mat-list-item (click)="populateNotifications()" routerLink="/messages" routerLinkActive="active-list-item">
        <mat-icon
          svgIcon="messages"
          style="border-color: red"
          class="m-2"></mat-icon
        ><span>Messages</span>
      </mat-list-item>
      <!-- <mat-list-item routerLink="/login">
        <mat-icon svgIcon="reports" class="m-2"></mat-icon><span>Reports</span>
      </mat-list-item> -->
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <div>
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
